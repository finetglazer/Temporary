2025-05-02 00:05:01 | TRACE | Weights attr: {}
2025-05-02 00:05:01 | TRACE | Pattern "/users/**" matches against value "/users/api/v1/auth/2fa/enable"
2025-05-02 00:05:01 | DEBUG | Route matched: user-service-route
2025-05-02 00:05:01 | DEBUG | Mapping [Exchange: POST http://good-musical-joey.ngrok-free.app/users/api/v1/auth/2fa/enable] to Route{id='user-service-route', uri=http://localhost:8081, order=0, predicate=Paths: [/users/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-05-02 00:05:01 | DEBUG | [4f442dbe-49] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@4d3990a5
2025-05-02 00:05:01 | DEBUG | Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=com.project.apigateway.security.WebSocketAuthenticationFilter@2a0ce342}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@6167c42f}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@212c0aff}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@fe38c0e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3ef914f5}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2c7c898a}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@2cbc2db2}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@4a86be01}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@61e0f9b9}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@22846a1d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@2de96eba}, order = 2147483647]]
2025-05-02 00:05:01 | DEBUG | /users/api/v1/auth/2fa/enable
2025-05-02 00:05:01 | TRACE | RouteToRequestUrlFilter start
2025-05-02 00:05:01 | DEBUG | Will instrument the HTTP request headers [Host:"good-musical-joey.ngrok-free.app", User-Agent:"PostmanRuntime/7.43.4", Content-Length:"65", Accept:"*/*", Accept-Encoding:"gzip, deflate, br", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiI2N2QzZjFhYzNiYzZkNDQ4NjQ5MzE0ZmEiLCJpYXQiOjE3NDYxMTMyNDksImV4cCI6MTc0NjE5OTY0OX0.xqeJfoaHzGO1m9Uo6tdu9qhMWs6Jb8wiKVSrebkD2uU", Content-Type:"application/json", Postman-Token:"846163bb-f4b3-4347-bc34-abd7705b4c99", X-Forwarded-For:"116.96.26.126,0:0:0:0:0:0:0:1", X-Forwarded-Host:"good-musical-joey.ngrok-free.app,good-musical-joey.ngrok-free.app", X-Forwarded-Proto:"https,http", Forwarded:"proto=http;host=good-musical-joey.ngrok-free.app;for="[0:0:0:0:0:0:0:1]:58824"", X-Forwarded-Port:"80"]
2025-05-02 00:05:01 | DEBUG | Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='user-service-route', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://good-musical-joey.ngrok-free.app/users/api/v1/auth/2fa/enable'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2e7b8e7', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=9.72E-5, duration(nanos)=97200.0, startTimeNanos=13403546662900}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@bc8cf65} created for the request. New headers are [Host:"good-musical-joey.ngrok-free.app", User-Agent:"PostmanRuntime/7.43.4", Content-Length:"65", Accept:"*/*", Accept-Encoding:"gzip, deflate, br", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiI2N2QzZjFhYzNiYzZkNDQ4NjQ5MzE0ZmEiLCJpYXQiOjE3NDYxMTMyNDksImV4cCI6MTc0NjE5OTY0OX0.xqeJfoaHzGO1m9Uo6tdu9qhMWs6Jb8wiKVSrebkD2uU", Content-Type:"application/json", Postman-Token:"846163bb-f4b3-4347-bc34-abd7705b4c99", X-Forwarded-For:"116.96.26.126,0:0:0:0:0:0:0:1", X-Forwarded-Host:"good-musical-joey.ngrok-free.app,good-musical-joey.ngrok-free.app", X-Forwarded-Proto:"https,http", Forwarded:"proto=http;host=good-musical-joey.ngrok-free.app;for="[0:0:0:0:0:0:0:1]:58824"", X-Forwarded-Port:"80"]
2025-05-02 00:05:01 | TRACE | outbound route: 95d1b158, inbound: [4f442dbe-49] 
2025-05-02 00:05:01 | DEBUG | Will instrument the response
2025-05-02 00:05:01 | DEBUG | The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='user-service-route', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://good-musical-joey.ngrok-free.app/users/api/v1/auth/2fa/enable'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2e7b8e7', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0563859, duration(nanos)=5.63859E7, startTimeNanos=13403546662900}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@bc8cf65}
2025-05-02 00:05:01 | TRACE | NettyWriteResponseFilter start inbound: 95d1b158, outbound: [4f442dbe-49] 
2025-05-02 00:05:01 | TRACE | spring.cloud.gateway.requests tags: [tag(httpMethod=POST),tag(httpStatusCode=500),tag(outcome=SERVER_ERROR),tag(routeId=user-service-route),tag(routeUri=http://localhost:8081),tag(status=INTERNAL_SERVER_ERROR)]
